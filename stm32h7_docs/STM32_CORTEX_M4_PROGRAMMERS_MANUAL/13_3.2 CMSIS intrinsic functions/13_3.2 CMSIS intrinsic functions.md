Table 21. Cortex-M4 instructions (continued)

| Mnemonic  | Operands     | Brief description                       | Flags   | Page                   |
|-----------|--------------|-----------------------------------------|---------|------------------------|
| VMOV      | Dd[x], Rt    | Copy Arm core register to scalar        | _       | 3.10.15 on page<br>165 |
| VMOV      | Rt, Dn[x]    | Copy scalar to Arm core register        |         |                        |
| VMRS      | Rt, FPSCR    | Move FPSCR to Arm core register or APSR | N,Z,C,V | 3.10.19 on page<br>169 |
| VMSR      | FPSCR, Rt    | Move to FPSCR from Arm<br>Core register | FPSCR   | 3.10.20 on page<br>170 |
| VMUL.F32  | {Sd,} Sn, Sm | Floating-point multiply                 | _       | 3.10.21 on page<br>171 |
| VNEG.F32  | Sd, Sm       | Floating-point negate                   | _       | 3.10.22 on page<br>172 |
| VNMLA.F32 | Sd, Sn, Sm   | Floating-point multiply and add         | _       | 3.10.23 on page<br>173 |
| VNMLS.F32 | Sd, Sn, Sm   | Floating-point multiply and subtract    | _       | 3.10.23 on page<br>173 |
| VNMUL     | {Sd,} Sn, Sm | Floating-point multiply                 | _       | 3.10.23 on page<br>173 |
| VPOP      | list         | Pop extension registers                 | _       | 3.10.24 on page<br>174 |
| VPUSH     | list         | Push extension registers                | _       | 3.10.25 on page<br>175 |
| VSQRT.F32 | Sd, Sm       | Calculates floating-point square root   | _       | 3.10.26 on page<br>176 |
| VSTM      | Rn{!}, list  | Floating-point register store multiple  | _       | 3.10.27 on page<br>177 |
| WFE       | _            | Wait for event                          | _       | 3.11.11 on page 191    |
| WFI       | _            | Wait for interrupt                      | _       | 3.11.12 on page<br>192 |

## 3.2 CMSIS intrinsic functions

ISO/IEC C code cannot directly access some Cortex-M4 instructions. This section describes intrinsic functions that can generate these instructions, provided by the CMIS, and that might be provided by a C compiler. If a C compiler does not support an appropriate intrinsic function, you might have to use an inline assembler to access some instructions.

The CMSIS provides the intrinsic functions listed in *Table 22* to generate instructions that ANSI cannot directly access.

58/262 PM0214 Rev 10

![](_page_0_Picture_8.jpeg)

**Table 22. CMSIS intrinsic functions to generate some Cortex-M4 instructions**

<span id="page-1-0"></span>

| Instruction | CMSIS intrinsic function          |  |  |
|-------------|-----------------------------------|--|--|
| CPSIE I     | voidenable_irq(void)              |  |  |
| CPSID I     | voiddisable_irq(void)             |  |  |
| CPSIE F     | voidenable_fault_irq(void)        |  |  |
| CPSID F     | voiddisable_fault_irq(void)       |  |  |
| ISB         | voidISB(void)                     |  |  |
| DSB         | voidDSB(void)                     |  |  |
| DMB         | voidDMB(void)                     |  |  |
| REV         | uint32_tREV(uint32_t int value)   |  |  |
| REV16       | uint32_tREV16(uint32_t int value) |  |  |
| REVSH       | uint32_tREVSH(uint32_t int value) |  |  |
| RBIT        | uint32_tRBIT(uint32_t int value)  |  |  |
| SEV         | voidSEV(void)                     |  |  |
| WFE         | voidWFE(void)                     |  |  |
| WFI         | voidWFI(void)                     |  |  |

The CMSIS also provides a number of functions for accessing the special registers using MRS and MSR instructions (see *[Table 23](#page-1-1)*).

**Table 23. CMSIS intrinsic functions to access the special registers** 

<span id="page-1-1"></span>

| Special register | Access | CMSIS function                        |  |
|------------------|--------|---------------------------------------|--|
| PRIMASK          | Read   | uint32_tget_PRIMASK (void)            |  |
|                  | Write  | voidset_PRIMASK (uint32_t value)      |  |
| FAULTMASK        | Read   | uint32_tget_FAULTMASK (void)          |  |
|                  | Write  | voidset_FAULTMASK (uint32_t value)    |  |
| BASEPRI          | Read   | uint32_tget_BASEPRI (void)            |  |
|                  | Write  | voidset_BASEPRI (uint32_t value)      |  |
|                  | Read   | uint32_tget_CONTROL (void)            |  |
| CONTROL          | Write  | voidset_CONTROL (uint32_t value)      |  |
|                  | Read   | uint32_tget_MSP (void)                |  |
| MSP              | Write  | voidset_MSP (uint32_t TopOfMainStack) |  |
|                  | Read   | uint32_tget_PSP (void)                |  |
| PSP              | Write  | voidset_PSP (uint32_t TopOfProcStack) |  |

![](_page_1_Picture_7.jpeg)

PM0214 Rev 10 59/262