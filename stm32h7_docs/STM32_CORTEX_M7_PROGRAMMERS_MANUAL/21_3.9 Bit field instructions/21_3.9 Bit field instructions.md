- SXTAH extracts bits[15:0] from *Rm* and sign extends to 32 bits.
- UXTAH extracts bits[15:0] from *Rm* and zero extends to 32 bits.
- SXTAB16 extracts bits[7:0] from *Rm* and sign extends to 16 bits, and extracts bits [23:16] from *Rm* and sign extends to 16 bits.
- UXTAB16 extracts bits[7:0] from *Rm* and zero extends to 16 bits, and extracts bits [23:16] from *Rm* and zero extends to 16 bits.
- 3. Adds the signed or zero extended value to the word or corresponding halfword of *Rn* and writes the result in *Rd*.

# **Restrictions**

Do not use SP and do not use PC.

### **Condition flags**

These instructions do not affect the flags.

#### **Examples**

```
SXTAH R4, R8, R6, ROR #16 ; Rotates R6 right by 16 bits, obtains bottom
                          ; halfword, sign extends to 32 bits, adds
                          ; R8, and writes to R4
UXTAB R3, R4, R10 ; Extracts bottom byte of R10 and zero extends 
                          ; to 32 bits, adds R4, and writes to R3.
```

# **3.9 Bit field instructions**

*[Table](#page-0-0) 34* shows the instructions that operate on adjacent sets of bits in registers or bit fields:

**Table 34. Packing and unpacking instructions** 

<span id="page-0-0"></span>

| Mnemonic | Brief description          | See                       |
|----------|----------------------------|---------------------------|
| BFC      | Bit Field Clear            | BFC and BFI on page 142   |
| BFI      | Bit Field Insert           | BFC and BFI on page 142   |
| SBFX     | Signed Bit Field Extract   | SBFX and UBFX on page 143 |
| SXTB     | Sign extend a byte         | SXT and UXT on page 144   |
| SXTH     | Sign extend a halfword     | SXT and UXT on page 144   |
| UBFX     | Unsigned Bit Field Extract | SBFX and UBFX on page 143 |
| UXTB     | Zero extend a byte         | SXT and UXT on page 144   |
| UXTH     | Zero extend a halfword     | SXT and UXT on page 144   |

![](_page_0_Picture_17.jpeg)

PM0253 Rev 5 141/254

# <span id="page-1-0"></span>**3.9.1 BFC and BFI**

Bit Field Clear and Bit Field Insert.

## **Syntax**

```
BFC{cond} Rd, #lsb, #width
BFI{cond} Rd, Rn, #lsb, #width
```

#### Where:

*cond* Is an optional condition code. See *Conditional execution on page 68*.

*Rd* Is the destination register. *Rn* Is the source register.

*lsb* Is the position of the least significant bit of the bit field. *lsb* must be in the range

0 to 31.

*width* Is the width of the bit field and must be in the range 1 to 32−*lsb*.

# **Operation**

BFC clears a bit field in a register. It clears *width* bits in *Rd*, starting at the low bit position *lsb*. Other bits in *Rd* are unchanged.

BFI copies a bit field into one register from another register. It replaces *width* bits in *Rd* starting at the low bit position *lsb*, with *width* bits from *Rn* starting at bit[0]. Other bits in *Rd* are unchanged.

## **Restrictions**

Do not use SP and do not use PC.

## **Condition flags**

These instructions do not affect the flags.

### **Examples**

```
BFC R4, #8, #12 ; Clear bit 8 to bit 19 (12 bits) of R4 to 0
BFI R9, R2, #8, #12 ; Replace bit 8 to bit 19 (12 bits) of R9 with
                      ; bit 0 to bit 11 from R2.
```

142/254 PM0253 Rev 5

# <span id="page-2-0"></span>**3.9.2 SBFX and UBFX**

Signed Bit Field Extract and Unsigned Bit Field Extract.

# **Syntax**

```
SBFX{cond} Rd, Rn, #lsb, #width
UBFX{cond} Rd, Rn, #lsb, #width
```

#### Where:

*cond* Is an optional condition code. See *Conditional execution on page 68*.

*Rd* Is the destination register. *Rn* Is the source register.

*lsb* Is the position of the least significant bit of the bit field. *lsb* must be in the range

0 to 31.

*width* Is the width of the bit field and must be in the range 1 to 32−*lsb*.

# **Operation**

SBFX extracts a bit field from one register, sign extends it to 32 bits, and writes the result to the destination register.

UBFX extracts a bit field from one register, zero extends it to 32 bits, and writes the result to the destination register.

## **Restrictions**

Do not use SP and do not use PC*.*

### **Condition flags**

These instructions do not affect the flags.

## **Examples**

```
SBFX R0, R1, #20, #4 ; Extract bit 20 to bit 23 (4 bits) from R1 and 
                       ; sign extend to 32 bits and then write the 
                       ; result to R0. 
UBFX R8, R11, #9, #10 ; Extract bit 9 to bit 18 (10 bits) from R11 and 
                       ; zero extend to 32 bits and then write the 
                       ; result to R8.
```

PM0253 Rev 5 143/254

# <span id="page-3-0"></span>**3.9.3 SXT and UXT**

Sign extend and Zero extend.

## **Syntax**

```
SXTextend{cond} {Rd,} Rm {, ROR #n}
UXTextend{cond} {Rd}, Rm {, ROR #n}
Where:
extend Is one of:
           B Extends an 8-bit value to a 32-bit value.
           H Extends a 16-bit value to a 32-bit value.
cond Is an optional condition code. See Conditional execution on page 68.
Rd Is the destination register.
Rm Is the register holding the value to extend.
ROR #n Is one of:
           ROR #8 Value from Rm is rotated right 8 bits.
           ROR #16 Value from Rm is rotated right 16 bits.
           ROR #24 Value from Rm is rotated right 24 bits.
           If ROR #n is omitted, no rotation is performed.
```

### **Operation**

These instructions do the following:

- 1. Rotate the value from *Rm* right by 0, 8, 16 or 24 bits.
- 2. Extract bits from the resulting value:
  - SXTB extracts bits[7:0] and sign extends to 32 bits.
  - UXTB extracts bits[7:0] and zero extends to 32 bits.
  - SXTH extracts bits[15:0] and sign extends to 32 bits.
  - UXTH extracts bits[15:0] and zero extends to 32 bits.

# **Restrictions**

Do not use SP and do not use PC.

### **Condition flags**

These instructions do not affect the flags.

## **Examples**

```
SXTH R4, R6, ROR #16 ; Rotate R6 right by 16 bits, then obtain the 
                      ; lower halfword of the result and then sign
                      ; extend to 32 bits and write the result to R4.
UXTB R3, R10 ; Extract lowest byte of the value in R10 and 
                      ; zero extend it, and write the result to R3.
```

144/254 PM0253 Rev 5

![](_page_3_Picture_21.jpeg)